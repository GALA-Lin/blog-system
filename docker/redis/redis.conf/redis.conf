# 绑定地址
bind 0.0.0.0

# 保护模式（生产环境建议开启并设置密码）
protected-mode no

# 端口
port 6379

# 持久化配置
# RDB 持久化
save 900 1
save 300 10
save 60 10000
rdbcompression yes
rdbchecksum yes
dbfilename dump.rdb
dir /data

# AOF 持久化
appendonly yes
appendfilename "appendonly.aof"
appendfsync everysec
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# 混合持久化（推荐）
aof-use-rdb-preamble yes

# 日志级别
loglevel notice
logfile /data/redis.log

# 最大内存（根据实际情况调整）
maxmemory 1gb

# 内存淘汰策略（当内存达到上限时）
# allkeys-lru: 删除最近最少使用的key（推荐）
# volatile-lru: 只删除设置了过期时间的最近最少使用key
# allkeys-random: 随机删除key
# volatile-random: 随机删除设置了过期时间的key
# volatile-ttl: 删除最接近过期时间的key
# noeviction: 不删除，写操作返回错误
maxmemory-policy allkeys-lru

# 慢查询日志
slowlog-log-slower-than 10000  # 超过10ms记录
slowlog-max-len 128

# 数据库数量
databases 16